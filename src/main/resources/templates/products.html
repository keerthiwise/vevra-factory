<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Products | Vevra</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">

</head>
<body>

<form method="get" action="/products" class="row g-2 mb-4">

  <div class="col-md-4">
    <input type="text" class="form-control"
           name="search"
           placeholder="Search product name..."
           th:value="${search}">
  </div>

  <div class="col-md-3">
    <select class="form-select" name="category">
      <option value="">All Categories</option>

      <option th:each="c : ${categories}"
              th:value="${c}"
              th:text="${c}"
              th:selected="${c == category}">
      </option>
    </select>
  </div>

  <div class="col-md-3">
    <select class="form-select" name="size">
      <option value="">All Sizes</option>

      <option th:each="s : ${sizes}"
              th:value="${s}"
              th:text="${s}"
              th:selected="${s == size}">
      </option>
    </select>
  </div>

  <div class="col-md-2 d-grid">
    <button class="btn btn-dark fw-bold" type="submit">Filter</button>
    <a href="/products" class="btn btn-outline-secondary fw-bold">Reset</a>

  </div>

</form>

<div th:replace="fragments :: navbar"></div>
<div th:replace="fragments :: floatingButtons"></div>



<div class="container mt-5">

  <div class="text-center mb-4">
    <h1 class="fw-bold">Our Products</h1>
    <p class="text-muted">Premium quality bottles for retail, corporate & bulk supply</p>
  </div>

  <div th:if="${#lists.isEmpty(products)}" class="alert alert-warning text-center">
    No products added yet.
  </div>

  <div class="row g-4" th:if="${!#lists.isEmpty(products)}">

    <div class="col-md-4" th:each="p : ${products}">
      <div class="card shadow-sm h-100">

        <!-- Image -->
        <div class="bg-light d-flex align-items-center justify-content-center"
             style="height:200px; overflow:hidden;">
          <img th:if="${p.imageUrl != null and p.imageUrl != ''}"
               th:src="${p.imageUrl}"
               class="img-fluid"
               style="max-height:200px; object-fit:cover;" />

          <div th:if="${p.imageUrl == null or p.imageUrl == ''}"
               class="text-muted fw-bold">
            No Image
          </div>
        </div>

        <div class="card-body">
          <h5 class="card-title fw-bold" th:text="${p.name}"></h5>

          <p class="mb-1">
            <span class="badge bg-primary" th:text="${p.category}"></span>
            <span class="badge bg-dark" th:text="${p.size}"></span>
          </p>

          <p class="text-success fw-bold fs-5 mb-2">
            â‚¹<span th:text="${p.price}"></span>
          </p>

          <p class="text-muted" th:text="${p.description}"></p>
        </div>

        <div class="card-footer bg-white border-0">
          <a href="/quote" class="btn btn-dark w-100">Request Quote</a>
        </div>

      </div>
    </div>

  </div>

</div>

<div th:replace="fragments :: footer"></div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
